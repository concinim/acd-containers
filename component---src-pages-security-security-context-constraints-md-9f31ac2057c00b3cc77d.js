"use strict";(self.webpackChunkacd_containers=self.webpackChunkacd_containers||[]).push([[7479],{3624:function(e,t,a){a.d(t,{Z:function(){return E}});var n=a(7294),r=a(8650),s=a.n(r),l=a(1597),o=a(3383),i=a(2618),c=a(5900),u=a.n(c),m=function(e){var t,a=e.title,r=e.theme,s=e.tabs,l=void 0===s?[]:s;return n.createElement("div",{className:u()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=l.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===r,t))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},d=function(e){var t=e.relativePagePath,a=e.repository,r=(0,l.useStaticQuery)("1364590287").site.siteMetadata.repository,s=a||r,o=s.baseUrl,i=s.subDirectory,c=o+"/edit/"+s.branch+i+"/src/pages"+t;return o?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:c},"Edit this page on GitHub"))):null},p=a(4703),h=a(1721),g=function(e){function t(){return e.apply(this,arguments)||this}return(0,h.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,r=e.slug,o=r.split("/").filter(Boolean).slice(-1)[0],i=a.map((function(e){var t,a=s()(e,{lower:!0,strict:!0}),i=a===o,c=new RegExp(o+"/?(#.*)?$"),m=r.replace(c,a);return n.createElement("li",{key:e,className:u()((t={},t["PageTabs-module--selected-item--aBB0K"]=i,t),"PageTabs-module--list-item--024o6")},n.createElement(l.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":t},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},i))))))},t}(n.Component),f=g,b=a(7296),y=a(5387),C=a(3732),v=function(e){var t=e.date,a=new Date(t);return t?n.createElement(C.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(C.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},E=function(e){var t=e.pageContext,a=e.children,r=e.location,c=e.Title,u=t.frontmatter,h=void 0===u?{}:u,g=t.relativePagePath,C=t.titleType,E=h.tabs,k=h.title,x=h.theme,w=h.description,N=h.keywords,P=h.date,A=(0,y.Z)().interiorTheme,S=(0,l.useStaticQuery)("2456312558").site.pathPrefix,D=S?r.pathname.replace(S,""):r.pathname,T=E?D.split("/").filter(Boolean).slice(-1)[0]||s()(E[0],{lower:!0}):"",R=x||A;return n.createElement(i.Z,{tabs:E,homepage:!1,theme:R,pageTitle:k,pageDescription:w,pageKeywords:N,titleType:C},n.createElement(m,{title:c?n.createElement(c,null):k,label:"label",tabs:E,theme:R}),E&&n.createElement(f,{title:k,slug:D,tabs:E,currentTab:T}),n.createElement(b.Z,{padded:!0},a,n.createElement(d,{relativePagePath:g}),n.createElement(v,{date:P})),n.createElement(p.Z,{pageContext:t,location:r,slug:D,tabs:E,currentTab:T}),n.createElement(o.Z,null))}},524:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return o},default:function(){return u}});var n=a(3366),r=(a(7294),a(4983)),s=a(3624),l=["components"],o={},i={_frontmatter:o},c=s.Z;function u(e){var t=e.components,a=(0,n.Z)(e,l);return(0,r.kt)(c,Object.assign({},i,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",null,"SecurityContextConstraints requirements"),(0,r.kt)("p",null,"Security Context Constraints (or SCCs) set limits on what containers in a pod can do on the cluster.  See ",(0,r.kt)("a",{parentName:"p",href:"https://docs.openshift.com/container-platform/4.7/authentication/managing-security-context-constraints.html"},"Managing security context constraints")," for more details."),(0,r.kt)("p",null,"By default, the Annotator for Clinical Data ACD operator uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"restricted")," SecurityContextConstraints resource for its pod security.\nIf desired, a custom SecurityContextConstraints resource can be created and applied instead. Here is an example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: security.openshift.io/v1\nkind: SecurityContextConstraints\nmetadata:\n  name: ibm-wh-server-operator-scc\n  annotations:\n    kubernetes.io/description: ibm-wh-server-operator-scc denies access to all\n      host features and requires pods to be run with a UID, and SELinux context\n      that are allocated to the namespace, enforces readOnlyRootFilesystem, and\n      drops all capabilities.\nallowHostDirVolumePlugin: false\nallowHostIPC: false\nallowHostNetwork: false\nallowHostPID: false\nallowHostPorts: false\nallowPrivilegeEscalation: false\nallowPrivilegedContainer: false\nallowedCapabilities: []\ndefaultAddCapabilities: []\ngroups: []\nfsGroup:\n  type: MustRunAs\npriority: null\nreadOnlyRootFilesystem: true\nrequiredDropCapabilities:\n  - ALL\nrunAsUser:\n  type: MustRunAsRange\nseLinuxContext:\n  type: MustRunAs\nsupplementalGroups:\n  type: RunAsAny\nusers: []\nvolumes:\n  - configMap\n  - downwardAPI\n  - emptyDir\n  - persistentVolumeClaim\n  - projected\n  - secret\n")),(0,r.kt)("p",null,"To cause the ACD operator to use the custom SecurityContextConstraints resource:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Find the ",(0,r.kt)("inlineCode",{parentName:"p"},"acd-sa")," ServiceAccount resource in the same namespace as the operator.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add the following to the rules in the ClusterRole resource that the ServiceAccount resource is bound to, and apply."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"- apiGroups:\n    - security.openshift.io\n  resourceNames:\n    - ibm-wh-server-operator-scc\n  resources:\n    - securitycontextconstraints\n  verbs:\n    - use\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ACD operator also creates custom ClusterRole, ClusterRoleBinding, Role, RoleBinding, SecurityContextConstraints, and ServiceAccount resources to ensure separation of duties.")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-security-security-context-constraints-md-9f31ac2057c00b3cc77d.js.map