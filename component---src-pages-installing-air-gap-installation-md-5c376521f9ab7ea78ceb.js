"use strict";(self.webpackChunkacd_containers=self.webpackChunkacd_containers||[]).push([[4557],{3624:function(e,t,a){a.d(t,{Z:function(){return C}});var r=a(7294),i=a(8650),n=a.n(i),l=a(1597),o=a(3383),s=a(2618),p=a(5900),c=a.n(p),m=function(e){var t,a=e.title,i=e.theme,n=e.tabs,l=void 0===n?[]:n;return r.createElement("div",{className:c()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=l.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===i,t))},r.createElement("div",{className:"bx--grid"},r.createElement("div",{className:"bx--row"},r.createElement("div",{className:"bx--col-lg-12"},r.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},u=function(e){var t=e.relativePagePath,a=e.repository,i=(0,l.useStaticQuery)("1364590287").site.siteMetadata.repository,n=a||i,o=n.baseUrl,s=n.subDirectory,p=o+"/edit/"+n.branch+s+"/src/pages"+t;return o?r.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},r.createElement("div",{className:"bx--col"},r.createElement("a",{className:"EditLink-module--link--IDrl1",href:p},"Edit this page on GitHub"))):null},h=a(4703),k=a(1721),d=function(e){function t(){return e.apply(this,arguments)||this}return(0,k.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,i=e.slug,o=i.split("/").filter(Boolean).slice(-1)[0],s=a.map((function(e){var t,a=n()(e,{lower:!0,strict:!0}),s=a===o,p=new RegExp(o+"/?(#.*)?$"),m=i.replace(p,a);return r.createElement("li",{key:e,className:c()((t={},t["PageTabs-module--selected-item--aBB0K"]=s,t),"PageTabs-module--list-item--024o6")},r.createElement(l.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return r.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},r.createElement("div",{className:"bx--grid"},r.createElement("div",{className:"bx--row"},r.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},r.createElement("nav",{"aria-label":t},r.createElement("ul",{className:"PageTabs-module--list--xLqxG"},s))))))},t}(r.Component),g=d,N=a(7296),f=a(5387),y=a(3732),b=function(e){var t=e.date,a=new Date(t);return t?r.createElement(y.X2,{className:"last-modified-date-module--row--XJoYQ"},r.createElement(y.sg,null,r.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},C=function(e){var t=e.pageContext,a=e.children,i=e.location,p=e.Title,c=t.frontmatter,k=void 0===c?{}:c,d=t.relativePagePath,y=t.titleType,C=k.tabs,E=k.title,v=k.theme,w=k.description,S=k.keywords,O=k.date,M=(0,f.Z)().interiorTheme,A=(0,l.useStaticQuery)("2456312558").site.pathPrefix,B=A?i.pathname.replace(A,""):i.pathname,H=C?B.split("/").filter(Boolean).slice(-1)[0]||n()(C[0],{lower:!0}):"",P=v||M;return r.createElement(s.Z,{tabs:C,homepage:!1,theme:P,pageTitle:E,pageDescription:w,pageKeywords:S,titleType:y},r.createElement(m,{title:p?r.createElement(p,null):E,label:"label",tabs:C,theme:P}),C&&r.createElement(g,{title:E,slug:B,tabs:C,currentTab:H}),r.createElement(N.Z,{padded:!0},a,r.createElement(u,{relativePagePath:d}),r.createElement(b,{date:O})),r.createElement(h.Z,{pageContext:t,location:i,slug:B,tabs:C,currentTab:H}),r.createElement(o.Z,null))}},516:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return o},default:function(){return c}});var r=a(3366),i=(a(7294),a(4983)),n=a(3624),l=["components"],o={},s={_frontmatter:o},p=n.Z;function c(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)(p,Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Note:  The air gap environment applies to IBM Watson Annotator for Clinical Data Container Edition.")),(0,i.kt)("p",null,"Since air gap environments do not have access to the public internet, and therefore no access to DockerHub, the following preparation steps are necessary to make the required images accessible to the Red Hat OpenShift Container Platform cluster."),(0,i.kt)("p",null,"If the Red Hat OpenShift Container Platform cluster has a Bastion host, ensure that the Bastion host can access:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The public internet to download the CASE and images."),(0,i.kt)("li",{parentName:"ul"},"The target (air gap) image registry where all the images will be mirrored to."),(0,i.kt)("li",{parentName:"ul"},"The Red Hat OpenShift Container Platform cluster to install the ACD operator on.")),(0,i.kt)("p",null,"In the absence of a Bastion host, a portable host with access to the public internet may used. By downloading the CASE and images onto the portable host, and then transporting the portable host into the air gap environment, the images can then be mirrored to the target (air gap) image registry."),(0,i.kt)("p",null,"If using a Bastion host, refer to ",(0,i.kt)("a",{parentName:"p",href:"#using-a-bastion-host"},"Using a Bastion host"),".\nIf using a portable host, refer to ",(0,i.kt)("a",{parentName:"p",href:"#using-a-portable-host"},"Using a portable host"),"."),(0,i.kt)("h3",null,"Using a Bastion host"),(0,i.kt)("h4",null,"1. Prepare the Bastion host"),(0,i.kt)("p",null,"Ensure you have the following installed on the Bastion host:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docker.com"},"Docker CLI (docker)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/IBM/cloud-pak-cli"},"IBM Cloud Pak CLI (cloudctl)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.openshift.com/container-platform/4.7/cli_reference/openshift_cli/getting-started-cli.html"},"Red Hat OpenShift Container Platform CLI (oc)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/containers/skopeo"},"Skopeo (skopeo)"))),(0,i.kt)("h4",null,"2. Download the CASE"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create a local directory in which to save the CASE."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"mkdir -p $HOME/offline\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Download the CASE from ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/IBM/cloud-pak/tree/master/repo/case/ibm-wh-acd"},"https://github.com/IBM/cloud-pak/tree/master/repo/case/ibm-wh-acd"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Save the CASE."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"cloudctl case save \\\n    --case <case-path> \\\n    --outputdir $HOME/offline\n")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-path>")," is the path or URL to the CASE to save."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify the CASE (.tgz) file and images (.csv) file have been downloaded."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"ls $HOME/offline\n\ncharts\nibm-wh-acd\nibm-wh-acd-2.0.0-charts.csv\nibm-wh-acd-2.0.0-images.csv\nibm-wh-acd-2.0.0.tgz\n")))),(0,i.kt)("h4",null,"3. Log into cluster"),(0,i.kt)("p",null,"Log into the Red Hat OpenShift Container Platform cluster as a cluster administrator using the ",(0,i.kt)("inlineCode",{parentName:"p"},"oc login")," command."),(0,i.kt)("h4",null,"4. Configure Bastion host’s registry authentication secret"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create the authentication secret for the IBM Entitled Registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action configure-creds-airgap \\\n    --args "--registry cp.icr.io --user <registry-user> --pass <registry-password>" \\\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-user>")," is the username for the entitled registry. This should be either ",(0,i.kt)("inlineCode",{parentName:"li"},"cp")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"iamapikey"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-password>")," is the password for the entitled registry."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create the authentication secret for the Bastion host’s registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action configure-creds-airgap \\\n    --args "--registry <bastion-registry> --user <registry-user> --pass <registry-password>"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<bastion-registry>")," is the Bastion host’s registry."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-user>")," is the username for the Bastion host’s registry."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-password>")," is the password for the Bastion host’s registry.")),(0,i.kt)("p",{parentName:"li"},"The credentials are saved to ",(0,i.kt)("inlineCode",{parentName:"p"},"$HOME/.airgap/secrets/<target-registry>.json")))),(0,i.kt)("h4",null,"5. Mirror images to Bastion host’s registry"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Copy the images in the CASE from the source (public) registry to the Bastion host’s (air gap) registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action mirror-images \\\n    --args "--registry <bastion-registry> --inputDir $HOME/offline"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<bastion-registry>")," is the Bastion host’s registry.")))),(0,i.kt)("h4",null,"6. Configure cluster to access Bastion host’s registry"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Configure a global image pull secret and ImageContentSourcePolicy resource."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action configure-cluster-airgap \\\n    --args "--registry <bastion-registry> --inputDir $HOME/offline"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<bastion-registry>")," is the Bastion host’s registry.")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("em",{parentName:"p"},"WARNING:")," This step may restart all cluster nodes. The cluster resources might be unavailable until the time the new pull secret is applied.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Optional: If you are using an insecure Bastion host’s registry, you must add the Bastion host’s registry to the cluster insecureRegistries list."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'oc patch image.config.openshift.io/cluster --type=merge \\\n    -p \'{"spec":{"registrySources":{"insecureRegistries":["\'<bastion-registry>\'"]}}}\'\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<bastion-registry>")," is the Bastion host’s registry.")))),(0,i.kt)("h4",null,"7. Proceed with installation"),(0,i.kt)("p",null,"Now that the air gap installation preparation steps are complete, you may continue with the installation. Proceed to ",(0,i.kt)("a",{parentName:"p",href:"../installing-ibm/#installing-the-ibm-operator-catalog"},"Installing IBM operator catalog"),"."),(0,i.kt)("h3",null,"Using a portable host"),(0,i.kt)("h4",null,"1. Prepare the portable host"),(0,i.kt)("p",null,"Ensure you have the following installed on the portable host:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docker.com"},"Docker CLI (docker)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/IBM/cloud-pak-cli"},"IBM Cloud Pak CLI (cloudctl)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.openshift.com/container-platform/4.7/cli_reference/openshift_cli/getting-started-cli.html"},"Red Hat OpenShift Container Platform CLI (oc)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/containers/skopeo"},"Skopeo (skopeo)"))),(0,i.kt)("h4",null,"2. Download the CASE"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create a local directory in which to save the CASE."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"mkdir -p $HOME/offline\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Download the CASE from ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/IBM/cloud-pak/tree/master/repo/case/ibm-wh-acd"},"https://github.com/IBM/cloud-pak/tree/master/repo/case/ibm-wh-acd"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Save the CASE."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"cloudctl case save \\\n    --case <case-path> \\\n    --outputdir $HOME/offline\n")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-path>")," is the path or URL to the CASE to save.")))),(0,i.kt)("h4",null,"3. Configure portable registry and authentication secret"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Initialize the portable registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action init-registry \\\n    --args "--registry localhost --user <registry-user> --pass <registry-password> --dir $HOME/offline/imageregistry"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-user>")," is the username for the registry, which is initialized to this value."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-password>")," is the password for the registry, which is initialized to this value."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Start the portable registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action start-registry \\\n    --args "--registry localhost --port 443 --user <registry-user> --pass <registry-password> --dir $HOME/offline/imageregistry"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-user>")," is the username for the portable device’s registry."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-password>")," is the password for the portable device’s registry."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create the authentication secret for the IBM Entitled Registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action configure-creds-airgap \\\n    --args "--registry cp.icr.io --user <registry-user> --pass <registry-password>" \\\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-user>")," is the username for the entitled registry. This should be either ",(0,i.kt)("inlineCode",{parentName:"li"},"cp")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"iamapikey"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-password>")," is the password for the entitled registry."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create the authentication secret for the portable registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action configure-creds-airgap \\\n    --args "--registry localhost:443 --user <registry-user> --pass <registry-password>"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-user>")," is the username for the portable device’s registry."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-password>")," is the password for the portable device’s registry.")),(0,i.kt)("p",{parentName:"li"},"The credentials are saved to ",(0,i.kt)("inlineCode",{parentName:"p"},"$HOME/.airgap/secrets/localhost:443.json")))),(0,i.kt)("h4",null,"4. Mirror images to portable registry"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The following step copies the images in the CASE from the source (public) registry to the portable registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action mirror-images \\\n    --args "--registry localhost:443 --inputDir $HOME/offline"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file.")))),(0,i.kt)("h4",null,"5. Transport portable device"),(0,i.kt)("p",null,"Now that the images are in the portable registry, transport the portable host into the air gap environment."),(0,i.kt)("h4",null,"6. Log into the cluster"),(0,i.kt)("p",null,"Log into the Red Hat OpenShift Container Platform cluster as a cluster administrator using the ",(0,i.kt)("inlineCode",{parentName:"p"},"oc login")," command."),(0,i.kt)("h4",null,"7. Configure portable device’s registry authentication secret"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create the authentication secret for the portable device’s registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action configure-creds-airgap \\\n    --args "--registry <portable-registry> --user <registry-user> --pass <registry-password>"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<portable-registry>")," is the portable device’s registry."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-user>")," is the username for the portable device’s registry."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<registry-password>")," is the password for the portable device’s registry.")),(0,i.kt)("p",{parentName:"li"},"The credentials are saved to ",(0,i.kt)("inlineCode",{parentName:"p"},"$HOME/.airgap/secrets/$TARGET_REGISTRY.json")))),(0,i.kt)("h4",null,"8. Mirror images to portable device’s registry"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The following step copies the images in the CASE from the portable registry to the portable device’s registry."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action mirror-images \\\n    --args "--fromRegistry localhost:443 --registry <portable-registry> --inputDir $HOME/offline"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<portable-registry>")," is the portable device’s registry.")))),(0,i.kt)("h4",null,"9. Configure cluster to access portable device’s registry"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Configure a global image pull secret and ImageContentSourcePolicy resource."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'cloudctl case launch \\\n    --case $HOME/offline/<case-file> \\\n    --namespace openshift-marketplace \\\n    --inventory clinicalDataAnnotatorOperatorSetup \\\n    --action configure-cluster-airgap \\\n    --args "--registry <portable-registry> --inputDir $HOME/offline"\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<case-file>")," is the CASE file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<portable-registry>")," is the portable device’s registry.")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("em",{parentName:"p"},"WARNING:")," This step may restart all cluster nodes. The cluster resources might be unavailable until the time the new pull secret is applied.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Optional: If you are using an insecure portable device’s registry, you must add the portable device’s registry to the cluster insecureRegistries list."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'oc patch image.config.openshift.io/cluster --type=merge \\\n    -p \'{"spec":{"registrySources":{"insecureRegistries":["\'<portable-registry>\'"]}}}\'\n')),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<portable-registry>")," is the portable device’s registry.")))),(0,i.kt)("h4",null,"10. Proceed with installation"),(0,i.kt)("p",null,"Now that the air gap installation preparation steps are complete, you may continue with the installation. Proceed to ",(0,i.kt)("a",{parentName:"p",href:"../installing-ibm/#installing-the-ibm-operator-catalog"},"Installing IBM operator catalog"),"."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-installing-air-gap-installation-md-5c376521f9ab7ea78ceb.js.map